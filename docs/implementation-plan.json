{
  "implementation_plan": {
    "phase_1": "Enhanced Intent Analysis",
    "phase_2": "Comment Reply System", 
    "phase_3": "Dialog Management",
    "phase_4": "Testing & Integration"
  },
  
  "components_to_modify": {
    "orchestrator": {
      "file": "services/orchestrator/src/index.ts",
      "changes": [
        "Extract user mention (@Arthur-schwan) from comment",
        "Detect ambiguous intents",
        "Trigger clarification workflow instead of immediate patch generation",
        "Store conversation state for follow-up comments"
      ]
    },
    
    "llm_service": {
      "file": "services/llm-patch/src/index.ts", 
      "changes": [
        "Enhanced analyzeIntent() to return confidence score",
        "New generateClarificationQuestion() function",
        "Support for conversational context",
        "Template-based response generation"
      ]
    },
    
    "adapter": {
      "file": "services/adapter/src/index.ts",
      "changes": [
        "New endpoint: POST /api/ado/reply-to-comment",
        "Extract comment metadata (user, thread ID)",
        "Post replies to specific comment threads", 
        "Handle comment notifications"
      ]
    },
    
    "webhook_processing": {
      "changes": [
        "Detect comment vs PR events",
        "Parse @mentions and commands",
        "Route to appropriate workflow (immediate vs clarification)"
      ]
    }
  }
}
