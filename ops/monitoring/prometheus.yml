global:
  scrape_interval: 15s
  evaluation_interval: 15s
  external_labels:
    monitor: 'AIForCoding'
    environment: 'development'

# Alert Rules
rule_files:
  - "alert.rules.yml"

# Alerting configuration
alerting:
  alertmanagers:
    - static_configs:
        - targets:
          - alertmanager:9093

# Scrape configurations
scrape_configs:
  # Self-monitoring
  - job_name: 'prometheus'
    static_configs:
      - targets: ['localhost:9090']
    scrape_interval: 30s

  # 🚪 Gateway Service Metrics
  - job_name: 'gateway'
    static_configs:
      - targets: ['code-agent-gateway:3001']
    metrics_path: '/metrics'
    scrape_interval: 10s
    scrape_timeout: 5s

  # ⚙️ Orchestrator Service Metrics
  - job_name: 'orchestrator'
    static_configs:
      - targets: ['agent-orchestrator:7071']
    metrics_path: '/metrics'
    scrape_interval: 15s

  # 🔌 Adapter Service Metrics
  - job_name: 'adapter'
    static_configs:
      - targets: ['agent-adapter:3002']
    metrics_path: '/metrics'
    scrape_interval: 15s

  # 🧠 LLM-Patch Service Metrics
  - job_name: 'llm-patch'
    static_configs:
      - targets: ['agent-llm-patch:3003']
    metrics_path: '/metrics'
    scrape_interval: 15s

  # 🌐 Traefik Reverse Proxy Metrics
  - job_name: 'traefik'
    static_configs:
      - targets: ['code-agent-traefik:8080']
    metrics_path: '/metrics'
    scrape_interval: 30s

  # 🖥️ Host System Metrics (CPU, Memory, Disk, Network)
  - job_name: 'node-exporter'
    static_configs:
      - targets: ['agent-node-exporter:9100']
    scrape_interval: 30s

  # 🐳 Docker Container Metrics
  - job_name: 'cadvisor'
    static_configs:
      - targets: ['agent-cadvisor:8080']
    scrape_interval: 30s
    metrics_path: '/metrics'

  # 💾 Azurite Storage Emulator (if available)
  - job_name: 'azurite'
    static_configs:
      - targets: ['agent-azurite:10000']
    metrics_path: '/metrics'
    scrape_interval: 60s
    scrape_timeout: 10s

  # 🏥 Health Monitor (Legacy - to be replaced)
  - job_name: 'health-monitor'
    static_configs:
      - targets: ['health-monitor:8888']
    metrics_path: '/health'
    scrape_interval: 60s
    scrape_timeout: 10s
